<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Multiple page code</title>

    <style>
        body {
            font-family: Arial;
            margin: 20px;
        }

        .question {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        .pagination {
            margin-top: 20px;
        }

        .pagination button {
            padding: 7px 12px;
            margin: 4px;
            cursor: pointer;
        }

        .active-page {
            background: #007bff;
            color: #fff;
        }
    </style>
</head>

<body>
    <div>
        <h2>Questions List</h2>

        <div id="questions-container"></div>

        <!-- Pagination container -->
        <div id="pagination" class="pagination"></div>
        <div>
            <button id="btnFirst">First</button>
            <button id="btnPrevious">Previous</button>
            <button id="btnNext">Next </button>
            <button id="btnLast">Last</button>
        </div>

        <script>
            $(document).ready(function () {

            var questions = [];      // store questions loaded from API
            var questionCountPerPage = 10;        // how many per page
            var thePage = 1;     // start page


            // === LOAD QUESTIONS FROM API ===
            function loadQuestions() {
                $.ajax({
                    url: "http://localhost:5238/api/questionbank/questions",
                    method: "GET",
                    success: function (data) {
                        questions = data;
                        renderPage(thePage);
                        renderPagination();
                    },
                    error: function () {
                        alert("Failed to load questions!");
                    }
                });
            }
            loadQuestions();
            // === RENDER QUESTIONS FOR A PAGE ===
            function renderPage(page) {
                $("#questions-container").empty();

                let startIndex = (page - 1) * questionCountPerPage;
                let endIndex = startIndex + questionCountPerPage;
                //get 10 questions
                let currentQuenstionsForPage = questions.slice(startIndex, endIndex);

                $.each(currentQuenstionsForPage, function (index, currentQuestion) {
                    $("#questions-container").append(
                        `<div class="question">${startIndex + index + 1}. ${currentQuestion.title}</div>`
                    );
                });
            }

            // === RENDER PAGINATION (4 Buttons Only) ===
            function renderPagination() {
                $("#pagination").empty();

                let totalPages = Math.ceil(questions.length / questionCountPerPage);   
            }
                $("#btnFirst").click(function () {
                    currentQuenstionsForPage = 1;
                    renderPage(currentQuenstionsForPage);
                    renderPagination();
                });

                // Previous Page
                $("#btnPrevious").click(function () {
                    if (currentQuenstionsForPage > 1) {
                        currentQuenstionsForPage--;
                        renderPage(currentQuenstionsForPage);
                        renderPagination();
                    }
                });

                // Next Page
                $("#btnNext").click(function () {
                    let totalPages = Math.ceil(questions.length / questionCountPerPage);
                    if (currentQuenstionsForPage < totalPages) {
                        currentQuenstionsForPage++;
                        renderPage(currentQuenstionsForPage);
                        renderPagination();
                    }
                });

                // Last Page
                $("#btnLast").click(function () {
                    currentQuenstionsForPage = Math.ceil(questions.length / questionCountPerPage);
                    renderPage(currentQuenstionsForPage);
                    renderPagination();
                });
            });
        </script>

    </div>

</body>

</html>