<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Profile</title>

  <!-- Tailwind CSS CDN -->
  <script src="../Script/Tailwind.min.js"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-100 to-blue-300 flex justify-center items-center">

  <!-- Profile Card -->
  <div class="w-full max-w-3xl bg-white rounded-2xl shadow-xl p-10 mt-20 ml-60">

    <!-- Profile Header -->
    <div class="text-center mb-10">
      <img 
        src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
        class="w-32 h-32 rounded-full border-4 border-blue-700 mx-auto"
        alt="User Avatar"
      />

      <h3 id="profileName" class="text-3xl font-semibold text-blue-800 mt-4"></h3>
      <p id="profileRole" class="text-gray-500 text-sm">User Role: subject matter expert</p>
    </div>

    <!-- User Info Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">

      <div>
        <p class="font-semibold text-gray-800">Aadhar ID</p>
        <p id="profileAadhar" class="text-gray-600"></p>
      </div>

      <div>
        <p class="font-semibold text-gray-800">Full Name</p>
        <p id="profileFullName" class="text-gray-600"></p>
      </div>

      <div>
        <p class="font-semibold text-gray-800">Email</p>
        <p id="profileEmail" class="text-gray-600"></p>
      </div>

      <div>
        <p class="font-semibold text-gray-800">Contact Number</p>
        <p id="profileContact" class="text-gray-600"></p>
      </div>

    </div>

    <!-- Edit Button -->
    <div class="text-center mt-10">
      <button
        class="px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition"
        onclick="editProfile()"
      >
        Edit Profile
      </button>
    </div>

  </div>

  <!-- jQuery (if needed for your AJAX) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    userId = localStorage.getItem("userId");

    function editProfile() {
      $("#content").load("EditProfile.html");
    }

    $(document).ready(function () {
      $.ajax({
        url: `http://localhost:5238/api/UserProfile/${userId}`,
        method: "GET",
        success: function (data) {
          if (!data) {
            alert("Profile Not Found!!");
            return;
          }

          document.getElementById("profileName").textContent =
            data.firstname + " " + data.lastname;
          document.getElementById("profileFullName").textContent =
            data.firstname + " " + data.lastname;

          document.getElementById("profileAadhar").textContent = data.aadharId;
          document.getElementById("profileEmail").textContent = data.email;
          document.getElementById("profileContact").textContent = data.contactNumber;
        },
        error: function (xhr, status, error) {
          console.error("Error fetching profile:", error);
        },
      });
    });
  </script>

</body>
</html>
